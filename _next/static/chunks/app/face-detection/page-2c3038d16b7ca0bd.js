(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[752],{383:(e,t,n)=>{Promise.resolve().then(n.bind(n,52090))},52090:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var c=n(95155),r=n(12115);function a(){let e=(0,r.useRef)(null),t=(0,r.useRef)(null),n=null,a=null;return(0,r.useEffect)(()=>{async function c(){try{let t=await navigator.mediaDevices.getUserMedia({video:!0});e.current&&(e.current.srcObject=t,e.current.play())}catch(e){console.error("摄像头访问失败:",e)}}async function r(){return new Promise(e=>{let t=document.createElement("script");t.src="opencv.js",t.async=!0,t.onload=()=>{cv.onRuntimeInitialized=()=>{(a=new cv.CascadeClassifier).load("haarcascade_frontalface_default.xml"),e()}},document.body.appendChild(t)})}return async function(){await c(),await r(),function c(){if(!e.current||!t.current||!a)return;let r=e.current,i=t.current,l=i.getContext("2d");if(r.readyState===r.HAVE_ENOUGH_DATA){i.width=r.videoWidth,i.height=r.videoHeight,l.drawImage(r,0,0,i.width,i.height);let e=cv.imread(i),t=new cv.Mat;cv.cvtColor(e,t,cv.COLOR_RGBA2GRAY);let n=new cv.RectVector;a.detectMultiScale(t,n);for(let t=0;t<n.size();++t){let c=n.get(t),r=new cv.Point(c.x,c.y),a=new cv.Point(c.x+c.width,c.y+c.height);cv.rectangle(e,r,a,[255,0,0,255],3);let i=new cv.Point(c.x,c.y-10);cv.putText(e,"Face",i,cv.FONT_HERSHEY_SIMPLEX,.8,[255,0,0,255],2)}cv.imshow(i,e),e.delete(),t.delete(),n.delete()}n=requestAnimationFrame(c)}()}(),()=>{var t;n&&cancelAnimationFrame(n),(null===(t=e.current)||void 0===t?void 0:t.srcObject)&&e.current.srcObject.getTracks().forEach(e=>e.stop()),a&&a.delete()}},[]),(0,c.jsxs)("div",{className:"face-detection-container",children:[(0,c.jsx)("video",{ref:e,style:{display:"none"},playsInline:!0,muted:!0}),(0,c.jsx)("canvas",{ref:t,style:{maxWidth:"100%",backgroundColor:"#000"}})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(383)),_N_E=e.O()}]);