(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[752],{383:(e,t,n)=>{Promise.resolve().then(n.bind(n,52090))},52090:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(95155),c=n(12115);function a(){let e=(0,c.useRef)(null),t=(0,c.useRef)(null),n=null;return(0,c.useEffect)(()=>{async function r(){try{let t=await navigator.mediaDevices.getUserMedia({video:!0});e.current&&(e.current.srcObject=t,e.current.play())}catch(e){console.error("摄像头访问失败:",e)}}async function c(){return new Promise(e=>{let t=document.createElement("script");t.src="opencv.js",t.async=!0,t.onload=()=>{cv.onRuntimeInitialized=()=>{e()}},document.body.appendChild(t)})}return async function(){await r(),await c(),function r(){if(!e.current||!t.current)return;let c=e.current,a=t.current,i=a.getContext("2d");if(c.readyState===c.HAVE_ENOUGH_DATA){a.width=c.videoWidth,a.height=c.videoHeight,i.drawImage(c,0,0,a.width,a.height);let e=cv.imread(a),t=new cv.Mat;cv.cvtColor(e,t,cv.COLOR_RGBA2GRAY);let n=new cv.Mat;cv.cvtColor(t,n,cv.COLOR_GRAY2RGBA),cv.imshow(a,n),e.delete(),t.delete(),n.delete()}n=requestAnimationFrame(r)}()}(),()=>{var t;n&&cancelAnimationFrame(n),(null===(t=e.current)||void 0===t?void 0:t.srcObject)&&e.current.srcObject.getTracks().forEach(e=>e.stop())}},[]),(0,r.jsxs)("div",{className:"face-detection-container",children:[(0,r.jsx)("video",{ref:e,style:{display:"none"},playsInline:!0,muted:!0}),(0,r.jsx)("canvas",{ref:t,style:{maxWidth:"100%",backgroundColor:"#000"}})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(383)),_N_E=e.O()}]);